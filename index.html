<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>AudioParam example</title>

    <link rel="stylesheet" href="">
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <h1>AudioParam example</h1>
    <audio controls>  
      <source src="viper.ogg" type="audio/ogg">
      <source src="viper.mp3" type="audio/mp3">   
      <p>Browser too old to support HTML5 audio? How depressing!</p>
    </audio>
    <div class="button-bar">
      <button class="set-target-at-time-plus">setValueAtTime() +0.25 in 1 second</button>
      <button class="set-target-at-time-minus">setValueAtTime() -0.25 in 1 second</button>
    </div>
    <pre></pre>
  </body>
<script>
// create audio context
var AudioContext = window.AudioContext || window.webkitAudioContext;
var audioCtx = new AudioContext();

// set basic variables for example
var myAudio = document.querySelector('audio');
var pre = document.querySelector('pre');
var myScript = document.querySelector('script');

pre.innerHTML = myScript.innerHTML;

var targetAtTimePlus = document.querySelector('.set-target-at-time-plus');
var targetAtTimeMinus = document.querySelector('.set-target-at-time-minus');

// Create a MediaElementAudioSourceNode
// Feed the HTMLMediaElement into it
var source = audioCtx.createMediaElementSource(myAudio);

// Create a gain node and set it's gain value to 0.5
var gainNode = audioCtx.createGain();
gainNode.gain.value = 0.5;
console.log(gainNode.gain.value);

// connect the AudioBufferSourceNode to the gainNode
// and the gainNode to the destination
source.connect(gainNode);
gainNode.connect(audioCtx.destination);

// set buttons to do something onclick
targetAtTimePlus.onclick = function() {
  gainNode.gain.setValueAtTime(gainNode.gain.value + 0.25, audioCtx.currentTime + 1);
}

targetAtTimeMinus.onclick = function() {
  gainNode.gain.setValueAtTime(gainNode.gain.value - 0.25, audioCtx.currentTime + 1);
}

  </script>
</html>